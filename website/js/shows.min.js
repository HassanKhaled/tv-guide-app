callOnStart("Shows"),createTempDivsOnContentDiv(10,"temp","#content");let searchButton=document.querySelector("#search"),searchInput=document.querySelector("#searchTerm"),episodeList=document.querySelector("#episodes"),castList=document.querySelector("#cast"),crewList=document.querySelector("#crew"),akaList=document.querySelector("#aka"),imagesList=document.querySelector("#images"),results="";getRequest=async url=>{const response=await fetch(url);clearContentOfParentElement(contentDiv),fragment=new DocumentFragment;try{const data=await response.json();for(item of(console.log(data),results=data,data)){const x=item.show;fragment.appendChild(createImageFromUrl(imageExistNotCreateTemp(x.image),x.name,x.url,JSON.stringify(x)))}contentDiv.appendChild(fragment)}catch(error){createAlertWithMessage("alert-danger",3e3,"Error  ",error,contentDiv)}},searchButton.addEventListener("click",e=>{searchInput.checkValidity()?getRequest("http://api.tvmaze.com/search/shows?q="+searchInput.value):createAlertWithMessage("alert-danger",3e3,"Error  ","please fill in required search field",contentDiv)}),getRequestandFill=async url=>{clearBySelector("#episodes"),fillListHeaderFromContentUsingRefrence(episodeList,"Episodes ");const response=await fetch(url);try{const data=await response.json();for(item of(console.log(data),data)){let tempLi=document.createElement("li");tempLi.innerHTML=`${item.name} Ep:${item.number} S:${item.season} Aird: ${item.airdate} @ ${item.airstamp}  ${item.summary}`,tempLi.classList.add("list-group-item"),episodeList.appendChild(tempLi)}}catch(error){console.log(error),createAlertWithMessage("alert-danger",3e3,"Error  ",error,contentDiv)}},getCastData=async url=>{clearBySelector("#cast"),fillListHeaderFromContentUsingRefrence(castList,"Cast ");const response=await fetch(url);try{const data=await response.json();for(item of(console.log(data),data)){let tempLi=document.createElement("li");tempLi.innerHTML=`${item.person.name} Played ${item.character.name}`,tempLi.classList.add("list-group-item"),castList.appendChild(tempLi)}}catch(error){console.log(error),createAlertWithMessage("alert-danger",3e3,"Error  ",error,contentDiv)}},getCrewData=async url=>{clearBySelector("#crew"),fillListHeaderFromContentUsingRefrence(crewList,"Crew ");const response=await fetch(url);try{const data=await response.json();for(item of(console.log(data),data)){let tempLi=document.createElement("li");tempLi.innerHTML=`${item.type}  -  ${item.person.name}`,tempLi.classList.add("list-group-item"),crewList.appendChild(tempLi)}}catch(error){console.log(error),createAlertWithMessage("alert-danger",3e3,"Error  ",error,contentDiv)}},getAkaData=async url=>{clearBySelector("#aka"),fillListHeaderFromContentUsingRefrence(akaList,"aka ");const response=await fetch(url);try{const data=await response.json();for(item of(console.log(data),data)){let tempLi=document.createElement("li");tempLi.innerHTML=`${item.name}  -  ${item.country.name}`,tempLi.classList.add("list-group-item");let img=document.createElement("img");img.setAttribute("src",imageFlageFromCode(item.country.code)),tempLi.appendChild(img),akaList.appendChild(tempLi)}}catch(error){console.log(error),createAlertWithMessage("alert-danger",3e3,"Error  ",error,contentDiv)}},getImagesData=async url=>{clearBySelector("#images");const response=await fetch(url);try{const data=await response.json();for(item of data){let tempLi=document.createElement("div"),img=document.createElement("img");void 0!==item.resolutions.medium&&img.setAttribute("src",item.resolutions.medium.url),img.classList.add("img-thumbnail"),tempLi.appendChild(img),imagesList.appendChild(tempLi)}}catch(error){console.log(error),createAlertWithMessage("alert-danger",3e3,"Error  ",error,contentDiv)}},contentDiv.addEventListener("click",e=>{console.log(e.target);const data=JSON.parse(e.target.getAttribute("data-value"));getRequestandFill(`http://api.tvmaze.com/seasons/${data.id}/episodes`),getCastData(`http://api.tvmaze.com/shows/${data.id}/cast`),getCrewData(`http://api.tvmaze.com/shows/${data.id}/crew`),getAkaData(`http://api.tvmaze.com/shows/${data.id}/akas`),getImagesData(`http://api.tvmaze.com/shows/${data.id}/images`),console.log(data),clearBySelector(".modal-title"),changeInnerHtmlContentUsingSelector(".modal-title",data.name);let content="";content+=data.type+" | ",content+=data.runtime+" Min | ",content+=data.language+" | ",content+=arrayIntoString(data.genres)+" | ",content+=data.premiered+" | ",null!==data.network?content+=data.network.country.name+" | ":content+="No Network |",content+=data.status,changeInnerHtmlContentUsingSelector("#info",content),changeInnerHtmlContentUsingSelector("#summary",data.summary),imageCreationIfExist(data.image,data.image.medium,"../website/images/missing.png","#modalImage"),null!==data.network?flageImg.setAttribute("src",imageFlageFromCode(data.network.country.code)):flageImg.setAttribute("src",imageFlageFromCode("un")),changeHrefContentUsingSelector("#official",data.officialSite),changeHrefContentUsingSelector("#Tvmaz",data.url)});